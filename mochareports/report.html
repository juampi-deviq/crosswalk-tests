<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:9,&quot;tests&quot;:35,&quot;passes&quot;:27,&quot;pending&quot;:6,&quot;failures&quot;:2,&quot;start&quot;:&quot;2020-07-27T16:32:42.337Z&quot;,&quot;end&quot;:&quot;2020-07-27T16:32:42.337Z&quot;,&quot;duration&quot;:535110,&quot;testsRegistered&quot;:35,&quot;passPercent&quot;:77.14285714285714,&quot;pendingPercent&quot;:17.142857142857142,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;1c34ce10-d4c8-42ea-94f0-81b2d4081d0f&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/integration/e2e/cameras.spec.js&quot;,&quot;file&quot;:&quot;cypress/integration/e2e/cameras.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;69cec65c-432c-472a-b542-c30d9e007d3c&quot;,&quot;title&quot;:&quot;Testing cameras on map and video streaming&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Trying to identify the camera icon on map&quot;,&quot;fullTitle&quot;:&quot;Testing cameras on map and video streaming Trying to identify the camera icon on map&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33564a25-887d-495f-aa9e-f19d1b0d87db&quot;,&quot;parentUUID&quot;:&quot;69cec65c-432c-472a-b542-c30d9e007d3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Testing video streaming on camera at DevIQ Headquarters&quot;,&quot;fullTitle&quot;:&quot;Testing cameras on map and video streaming Testing video streaming on camera at DevIQ Headquarters&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15366891-1d16-47de-aebe-cfe798ced456&quot;,&quot;parentUUID&quot;:&quot;69cec65c-432c-472a-b542-c30d9e007d3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If user has no streaming permissions, then he cannot see camera icons or start video streaming using API&quot;,&quot;fullTitle&quot;:&quot;Testing cameras on map and video streaming If user has no streaming permissions, then he cannot see camera icons or start video streaming using API&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d94b211-f1d5-4723-827d-9bffcd086bb3&quot;,&quot;parentUUID&quot;:&quot;69cec65c-432c-472a-b542-c30d9e007d3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;33564a25-887d-495f-aa9e-f19d1b0d87db&quot;,&quot;15366891-1d16-47de-aebe-cfe798ced456&quot;,&quot;2d94b211-f1d5-4723-827d-9bffcd086bb3&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fdb3dab6-58e2-4fae-8e69-7b57f158b843&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/integration/e2e/energy.spec.js&quot;,&quot;file&quot;:&quot;cypress/integration/e2e/energy.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b995171c-d6ef-49b6-8060-83513a2d3be0&quot;,&quot;title&quot;:&quot;Energy E2E Tests&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;API: Validation of energy values for all lights using all gateways for all user sites - Individual&quot;,&quot;fullTitle&quot;:&quot;Energy E2E Tests API: Validation of energy values for all lights using all gateways for all user sites - Individual&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:25434,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var token = window.localStorage.getItem(&#x27;access_token&#x27;);\nvar sites = window.localStorage.getItem(&#x27;sites&#x27;).split(&#x27;,&#x27;);\nvar _loop = function _loop(i) {\n  cy.request({\n    auth: {\n      bearer: token\n    },\n    url: \&quot;\&quot;.concat(Cypress.env(\&quot;PANGEA_BASE_URL\&quot;), \&quot;/api/v1/Synapse/\&quot;).concat(sites[i], \&quot;/Lights\&quot;)\n  }).then(function (response) {\n    response.body.light_n_controller.lights.forEach(function (light) {\n      var snappadress_light; //required to identify light\n      response.body.light_n_controller.controllers.forEach(function (gw) {\n        if (gw.id == light.controllerId) {\n          snappadress_light = gw.snapaddr;\n        }\n      }); //validation of energy retrieved from light\n      var start_date = Cypress.moment().format(&#x27;DD-MM-YYYY&#x27;);\n      cy.request({\n        auth: {\n          bearer: token\n        },\n        url: \&quot;\&quot;.concat(Cypress.env(\&quot;PANGEA_BASE_URL\&quot;), \&quot;/api/v1/Synapse/\&quot;).concat(sites[i], \&quot;/lightsEnergy\&quot;),\n        failOnStatusCode: false,\n        method: &#x27;POST&#x27;,\n        body: {\n          lights: [snappadress_light],\n          gateway_id: light.controllerId,\n          begin_date: Cypress.moment().format(&#x27;YYYY-MM-DD&#x27;) + &#x27;T00:00:00-03:00&#x27;,\n          end_date: Cypress.moment(start_date, &#x27;DD-MM-YYYY&#x27;).add(1, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;) + &#x27;T00:00:00-03:00&#x27;,\n          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone\n        }\n      }).then(function (response) {\n        expect(response.body.success).to.be.eq(true);\n        expect(response.body.begin_date).to.be.eq(Cypress.moment().format(&#x27;YYYY-MM-DD&#x27;) + &#x27;T00:00:00-03:00&#x27;);\n        expect(response.body.end_date).to.be.eq(Cypress.moment(start_date, &#x27;DD-MM-YYYY&#x27;).add(1, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;) + &#x27;T00:00:00-03:00&#x27;);\n        expect(response.body.timezone).to.be.eq(Intl.DateTimeFormat().resolvedOptions().timeZone);\n        response.body.energy.dataForThings[0].values.forEach(function (energy_values) {\n          expect(energy_values.timestamp);\n          expect(energy_values.to).to.match(/([20]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/); // 2019-12-03 22:09:39.069084\n          expect(energy_values.from).to.match(/([20]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/);\n          assert.isNumber(energy_values.value, &#x27;ok&#x27;);\n        });\n      });\n    });\n  });\n};\nfor (var i = 0; i &lt; sites.length; i++) {\n  _loop(i);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76a530a5-4912-4a8a-a2b7-65ab30dc527a&quot;,&quot;parentUUID&quot;:&quot;b995171c-d6ef-49b6-8060-83513a2d3be0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;API: Validations of requests for energy values for all site lights - Dashboard&quot;,&quot;fullTitle&quot;:&quot;Energy E2E Tests API: Validations of requests for energy values for all site lights - Dashboard&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:2706,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var token = window.localStorage.getItem(&#x27;access_token&#x27;);\nvar sites = window.localStorage.getItem(&#x27;sites&#x27;).split(&#x27;,&#x27;);\nvar _loop2 = function _loop2(i) {\n  cy.request({\n    auth: {\n      bearer: token\n    },\n    url: \&quot;\&quot;.concat(Cypress.env(\&quot;PANGEA_BASE_URL\&quot;), \&quot;/api/v1/Synapse/\&quot;).concat(sites[i], \&quot;/Lights\&quot;)\n  }).then(function (response) {\n    var snapaddress = [];\n    response.body.light_n_controller.controllers.forEach(function (gw) {\n      snapaddress.push(gw.snapaddr);\n    }); //validation of energy retrieved from light\n    var start_date = Cypress.moment().format(&#x27;DD-MM-YYYY&#x27;);\n    var site_controller = window.localStorage.getItem(sites[i]);\n    cy.request({\n      auth: {\n        bearer: token\n      },\n      url: \&quot;\&quot;.concat(Cypress.env(\&quot;PANGEA_BASE_URL\&quot;), \&quot;/api/v1/Synapse/\&quot;).concat(sites[i], \&quot;/lightsEnergy\&quot;),\n      failOnStatusCode: false,\n      method: &#x27;POST&#x27;,\n      body: {\n        lights: snapaddress,\n        gateway_id: site_controller,\n        //site controller\n        begin_date: Cypress.moment().format(&#x27;YYYY-MM-DD&#x27;) + &#x27;T00:00:00-03:00&#x27;,\n        end_date: Cypress.moment(start_date, &#x27;DD-MM-YYYY&#x27;).add(1, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;) + &#x27;T00:00:00-03:00&#x27;,\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone\n      }\n    }).then(function (response) {\n      expect(response.body.success).to.be.eq(true); //expect(response.body.begin_date).to.be.eq(Cypress.moment().format(&#x27;YYYY-MM-DD&#x27;) + &#x27;T00:00:00-03:00&#x27;);\n      expect(response.body.end_date).to.be.eq(Cypress.moment(start_date, &#x27;DD-MM-YYYY&#x27;).add(1, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;) + &#x27;T00:00:00-03:00&#x27;);\n      expect(response.body.timezone).to.be.eq(Intl.DateTimeFormat().resolvedOptions().timeZone);\n      response.body.energy.dataForThings[0].values.forEach(function (energy_values) {\n        expect(energy_values.timestamp);\n        expect(energy_values.to).to.match(/([20]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/); // 2019-12-03 22:09:39.069084\n        expect(energy_values.from).to.match(/([20]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/);\n        expect(energy_values).to.have.property(&#x27;value&#x27;);\n        assert.isNumber(energy_values.value, &#x27;ok&#x27;);\n      });\n    });\n  });\n};\nfor (var i = 0; i &lt; sites.length; i++) {\n  _loop2(i);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;276d2823-9964-47a1-9f38-328af8b9f021&quot;,&quot;parentUUID&quot;:&quot;b995171c-d6ef-49b6-8060-83513a2d3be0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Test of reset energy baseline functionality&quot;,&quot;fullTitle&quot;:&quot;Energy E2E Tests Test of reset energy baseline functionality&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:20166,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.server();\ncy.route(&#x27;POST&#x27;, &#x27;/api/v1/Auth&#x27;).as(&#x27;auth&#x27;);\ncy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;));\ncy.loginUI(_user.usernameCloud, _user.passwordCloud);\ncy.wait(4000); // Click on SITES\ncy.contains(&#x27;SITES&#x27;).click(); // Click on DevIQ\ncy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;DevIQ - Headquarters&#x27;).click();\ncy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;DevIQ - Remote Site&#x27;).click();\ncy.wait(1000);\ncy.route(&#x27;POST&#x27;, \&quot;/api/v1/Synapse/\&quot;.concat(hq_site, \&quot;/lightsEnergy\&quot;)) //hardcoded Headquarters\n.as(&#x27;getEnergy&#x27;);\ncy.get(&#x27;.justify-content-md-center.nav-item &gt; .mr-3&#x27;).contains(&#x27;Dashboard&#x27;).click();\ncy.wait(&#x27;@getEnergy&#x27;).then(function (xhr) {\n  cy.get(&#x27;[style=\&quot;margin: 0px; width: inherit; height: inherit;\&quot;] &gt; button.btn&#x27;).contains(&#x27;Set Baseline&#x27;).click({\n    force: true\n  });\n  var newBaseline = 0;\n  cy.get(&#x27;#energy-setup-modal___BV_modal_body_&#x27;).as(&#x27;form_setEB&#x27;);\n  cy.route(&#x27;PUT&#x27;, \&quot;/api/v1/Synapse/\&quot;.concat(hq_site, \&quot;/EnergyBaseline/_PUT\&quot;)).as(&#x27;updateEnergy&#x27;);\n  cy.get(&#x27;@form_setEB&#x27;).within(function () {\n    cy.get(&#x27;input&#x27;).clear().type(newBaseline);\n    cy.contains(&#x27;Save&#x27;).click();\n    cy.wait(&#x27;@updateEnergy&#x27;).then(function (xhr) {\n      expect(xhr.responseBody).to.have.property(&#x27;success&#x27;).eq(true);\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9705aec8-9594-436d-badc-fcb051354bcc&quot;,&quot;parentUUID&quot;:&quot;b995171c-d6ef-49b6-8060-83513a2d3be0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;API: setting sites energy baseline when the user has proper permissions&quot;,&quot;fullTitle&quot;:&quot;Energy E2E Tests API: setting sites energy baseline when the user has proper permissions&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:2139,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var token = window.localStorage.getItem(&#x27;access_token&#x27;);\ncy.request({\n  url: \&quot;\&quot;.concat(Cypress.env(\&quot;PANGEA_BASE_URL\&quot;), \&quot;/api/v1/Synapse/\&quot;).concat(hq_site, \&quot;/EnergyBaseline/_PUT\&quot;),\n  auth: {\n    bearer: token\n  },\n  method: &#x27;PUT&#x27;,\n  failOnStatusCode: false,\n  //this prevent test to fail if status isnÂ¨t 200\n  body: {\n    gw: \&quot;809e24d8-9a33-4575-a15a-5bf805652895\&quot;,\n    gw_lights: [],\n    no_max_output: true,\n    user_set_energy_output: \&quot;0\&quot;\n  }\n}).then(function (response) {\n  expect(response.status).to.eq(200);\n  expect(response.body).to.have.key(\&quot;success\&quot;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ed79d24-06b2-43db-a210-3a8cf01cc290&quot;,&quot;parentUUID&quot;:&quot;b995171c-d6ef-49b6-8060-83513a2d3be0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Testing that site Energy Baseline is not settable using UI or API if the user has proper permissions&quot;,&quot;fullTitle&quot;:&quot;Energy E2E Tests Testing that site Energy Baseline is not settable using UI or API if the user has proper permissions&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:15135,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var permissions = {\n  \&quot;b1fafb7c-35a9-4235-ae49-bc83d52b13a9\&quot;: [\&quot;READ\&quot;, \&quot;UPDATE\&quot;, \&quot;STREAM\&quot;, \&quot;SCHEDULE\&quot;],\n  //neighter have \&quot;EB\n  \&quot;97e9ad06-d70a-4d08-99c0-9b4ebe6f8d89\&quot;: [\&quot;READ\&quot;, \&quot;UPDATE\&quot;, \&quot;SCHEDULE\&quot;]\n};\ncy.updateUserPermissions(permissions).then(function () {\n  cy.server();\n  cy.route(&#x27;POST&#x27;, &#x27;/api/v1/Auth&#x27;).as(&#x27;auth&#x27;);\n  cy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;));\n  cy.loginUI(_user.usernameCloud, _user.passwordCloud);\n  cy.wait(4000); // Click on SITES\n  cy.contains(&#x27;SITES&#x27;).click(); // Click on DevIQ\n  cy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;DevIQ - Headquarters&#x27;).click();\n  cy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;DevIQ - Remote Site&#x27;).click();\n  cy.wait(1000);\n  cy.route(&#x27;POST&#x27;, \&quot;/api/v1/Synapse/\&quot;.concat(hq_site, \&quot;/lightsEnergy\&quot;)) //hardcoded Headquarters\n  .as(&#x27;getEnergy&#x27;);\n  cy.get(&#x27;.justify-content-md-center.nav-item &gt; .mr-3&#x27;).contains(&#x27;Dashboard&#x27;).click();\n  cy.wait(&#x27;@getEnergy&#x27;).then(function (xhr) {\n    cy.get(&#x27;[style=\&quot;margin: 0px; width: inherit; height: inherit;\&quot;] &gt; button.btn&#x27;).should(&#x27;not.exist&#x27;); //check that the \&quot;Set Baseline\&quot; btn doesnt exist in DOM\n    //test api service\n    var newBaseline = 0;\n    cy.request({\n      url: \&quot;\&quot;.concat(Cypress.env(\&quot;PANGEA_BASE_URL\&quot;), \&quot;/api/v1/Synapse/\&quot;).concat(hq_site, \&quot;/EnergyBaseline/_PUT\&quot;),\n      method: &#x27;PUT&#x27;,\n      failOnStatusCode: false,\n      //this prevent test to fail if status isnÂ¨t 200\n      body: {\n        gw: \&quot;809e24d8-9a33-4575-a15a-5bf805652895\&quot;,\n        gw_lights: [],\n        user_set_energy_output: newBaseline,\n        no_max_output: true\n      }\n    }).then(function (response) {\n      expect(response.status).to.eq(401);\n      expect(response.body.code).to.contains(\&quot;invalid\&quot;);\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f4d26a6-d4a8-4bd4-b013-44ecf8042630&quot;,&quot;parentUUID&quot;:&quot;b995171c-d6ef-49b6-8060-83513a2d3be0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Validate Energy Consumption Graph is reachable and visible&quot;,&quot;fullTitle&quot;:&quot;Energy E2E Tests Validate Energy Consumption Graph is reachable and visible&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:19421,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;/** Login to Pangea */\ncy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;));\ncy.loginUI(_user.usernameCloud, _user.passwordCloud);\n/** Click on SITES */\ncy.contains(&#x27;SITES&#x27;).click();\ncy.wait(5000);\n/** Click on DevIQ */\ncy.contains(&#x27;DevIQ&#x27;).click();\ncy.wait(2000);\n/** Click on first gateway */\ncy.get(&#x27;div[style*=\&quot;background-image\&quot;]&#x27;).last().trigger(&#x27;click&#x27;, {\n  force: true\n});\n/** Click on Devices button */\ncy.get(&#x27;button&#x27;).contains(&#x27;Devices&#x27;).click();\n/** Click on first device listed from table */\ncy.server();\ncy.route(&#x27;POST&#x27;, &#x27;/api/v1/Synapse/97e9ad06-d70a-4d08-99c0-9b4ebe6f8d89/lightsEnergy&#x27;).as(&#x27;getEnergy&#x27;);\ncy.get(&#x27;tbody&gt;tr&#x27;).eq(0).click({\n  force: true\n}); //wait for energy data from server...\ncy.wait(&#x27;@getEnergy&#x27;).then(function (xhr) {\n  cy.get(&#x27;#renderedInfoWindow &gt; :nth-child(1)&#x27;).contains(xhr.responseBody.energy.dataForThings[0].id);\n  /** Click on View Details */\n  cy.get(&#x27;button&#x27;).contains(&#x27;View Details&#x27;).click();\n  /** Get controller_id text from Light details pop up */\n  cy.get(&#x27;section[class*=\&quot;ps-container info-scroll-area\&quot;]&#x27;).find(&#x27;div&#x27;);\n  /** Call to GET LightEnergy endpoint for the specific controller_id and light_id saved previously*/\n  /*\n  cy.request({\n      method: &#x27;GET&#x27;,\n      url: &#x27;/api/v1/Gateway/&#x27; + gatewayId + &#x27;/LightEnergy&#x27;,\n      qs: {\n          trip: trip,\n          light_id: light_id_text,\n          controller_id: controller_id_text,\n          begin_date: currentDate,\n          end_date: currentDate\n      }\n  }).then(function (response) {\n       // Save the energy data from response\n      energy = response.body.energy\n      expect(response.status).to.eq(200);\n      expect(response.body)\n          .to.have.property(&#x27;success&#x27;)\n          .eq(true);\n       cy.get(&#x27;button&#x27;)\n          .contains(&#x27;View Energy&#x27;)\n          .click();\n       //Validate Energy Consumption Graph in UI against the energy data retrieve from LightEnergy API\n      if (energy.length &gt; 0) {\n          cy.get(&#x27;.echarts&#x27;).should(&#x27;be.visible&#x27;)\n      } else {\n          cy.get(&#x27;.echarts&#x27;).should(&#x27;not.be.visible&#x27;)\n      }\n   });*/\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;716420d8-2356-4d24-8e5a-e573423519c1&quot;,&quot;parentUUID&quot;:&quot;b995171c-d6ef-49b6-8060-83513a2d3be0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76a530a5-4912-4a8a-a2b7-65ab30dc527a&quot;,&quot;276d2823-9964-47a1-9f38-328af8b9f021&quot;,&quot;9705aec8-9594-436d-badc-fcb051354bcc&quot;,&quot;1ed79d24-06b2-43db-a210-3a8cf01cc290&quot;,&quot;9f4d26a6-d4a8-4bd4-b013-44ecf8042630&quot;,&quot;716420d8-2356-4d24-8e5a-e573423519c1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:85001,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;984092a8-426c-457f-aa25-11f8c1b31148&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/integration/e2e/events.spec.js&quot;,&quot;file&quot;:&quot;cypress/integration/e2e/events.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;956c5116-9d92-495b-a2ef-129150e0f5ff&quot;,&quot;title&quot;:&quot;Testing Event Creation&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Event Panel show the right data according to selected site and date&quot;,&quot;fullTitle&quot;:&quot;Testing Event Creation Event Panel show the right data according to selected site and date&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:63766,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;console.log(Cypress.moment().format(&#x27;YYYY-MM-DD&#x27;));\ncy.wait(&#x27;@getEvents&#x27;).then(function (xhr) {\n  cy.get(&#x27;.p-1 &gt; :nth-child(3)&#x27;).contains(&#x27;Events&#x27;).click();\n  var events = xhr.responseBody.result.scheduledScenes;\n  var active_events = [];\n  var today = Cypress.moment().format(&#x27;YYYY-MM-DD&#x27;).toString();\n  events.forEach(function (event) {\n    expect(event).to.have.property(\&quot;sceneId\&quot;);\n    expect(event).to.have.property(\&quot;name\&quot;);\n    expect(event).to.have.property(\&quot;start\&quot;);\n    expect(event).to.have.property(\&quot;rrule\&quot;);\n    expect(event).to.have.property(\&quot;astroTime\&quot;);\n    expect(event).to.have.property(\&quot;astroTimeOffset\&quot;);\n    var event_day = Cypress.moment(event.start, &#x27;YYYY-MM-DDThh:mm:ss.sssZ&#x27;).format(&#x27;YYYY-MM-DD&#x27;).toString();\n    console.log(\&quot;\&quot;.concat(event_day, \&quot; | \&quot;).concat(today));\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0681f208-7fd2-4945-91fc-545d4884b129&quot;,&quot;parentUUID&quot;:&quot;956c5116-9d92-495b-a2ef-129150e0f5ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Single Event Creation using an existing Scene and posterior event deletion&quot;,&quot;fullTitle&quot;:&quot;Testing Event Creation Single Event Creation using an existing Scene and posterior event deletion&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:25934,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var eventName = &#x27;Event Test &#x27; + Cypress.moment().format(&#x27;DD/MM/YY HH:mm&#x27;);\nvar hours = Cypress.moment().format(&#x27;hh&#x27;);\nvar minutes = Cypress.moment().add(2, &#x27;minutes&#x27;).format(&#x27;mm&#x27;); // Create event\ncy.get(&#x27;#arrow-timeline&#x27;).click();\ncy.get(&#x27;#timeline-hours&#x27;).click();\ncy.get(&#x27;span&#x27;).contains(&#x27;One-time event&#x27;).click();\ncy.get(&#x27;#event-name&#x27;).click({\n  force: true\n}).type(eventName).tab().type(hours).tab().type(minutes);\ncy.get(&#x27;#timepicker-input-ampm&#x27;).select(&#x27;pm&#x27;, {\n  force: true\n});\ncy.get(&#x27;#btn-next&#x27;).click(); //Before select scene wee need to ensute that the selected Scene contains just one Site\n// Choose an scene\ncy.get(&#x27;span&#x27;).contains(&#x27;Choose scene&#x27;).parent().click();\ncy.get(&#x27;ul[role=\&quot;menu\&quot;]&#x27;).find(&#x27;li&#x27;).contains(&#x27;Turn Off&#x27;).click(); // Save the event\ncy.server();\ncy.route(&#x27;POST&#x27;, \&quot;api/v1/Synapse/Event\&quot;).as(&#x27;eventPost&#x27;);\ncy.get(&#x27;.btn.btn-primary&#x27;).contains(&#x27;Save&#x27;).click();\ncy.wait(&#x27;@eventPost&#x27;).then(function (xhr) {\n  var res = xhr.responseBody;\n  expect(res).to.have.property(&#x27;success&#x27;).eq(true);\n  var event = res.result[0].scheduleScene;\n  expect(event).to.have.property(&#x27;id&#x27;);\n  var event_id = event.id;\n  expect(event).to.have.property(&#x27;sceneId&#x27;);\n  expect(event).to.have.property(&#x27;name&#x27;);\n  expect(event).to.have.property(&#x27;start&#x27;);\n  expect(event).to.have.property(&#x27;rrule&#x27;);\n  expect(event).to.have.property(&#x27;astroTime&#x27;);\n  expect(event).to.have.property(&#x27;astroTimeOffset&#x27;);\n  expect(res).to.have.property(&#x27;scene&#x27;).to.have.keys(&#x27;id&#x27;, &#x27;name&#x27;);\n  res.sceneZoneBehaviors.forEach(function (behavior) {\n    expect(behavior).to.have.property(&#x27;behaviorId&#x27;);\n    expect(behavior).to.have.property(&#x27;behaviorParameters&#x27;);\n    expect(behavior).to.have.property(&#x27;id&#x27;);\n    expect(behavior).to.have.property(&#x27;sceneId&#x27;).not.to.be.null;\n    expect(behavior).to.have.property(&#x27;zoneId&#x27;);\n  });\n  res.siteIds.forEach(function (siteID) {\n    expect(siteID).to.be.eq(Cypress.env(\&quot;DEVIQ_TESTING_SITE\&quot;));\n  });\n}); // Make sure that event is shown on Event table\ncy.get(&#x27;button&#x27;).contains(&#x27;Events&#x27;).click();\ncy.get(&#x27;table&#x27;).should(&#x27;contain.text&#x27;, eventName); // Delete the event recently created\ncy.get(&#x27;table&#x27;).find(&#x27;td&#x27;).contains(eventName).click();\ncy.get(&#x27;button&#x27;).contains(&#x27;Delete&#x27;).click();\ncy.route(&#x27;DELETE&#x27;, &#x27;api/v1/Synapse/**/Event/**/del&#x27;).as(&#x27;eventDeletion&#x27;);\ncy.get(&#x27;button&#x27;).contains(&#x27;Yes, delete it&#x27;).click();\ncy.wait(&#x27;@eventDeletion&#x27;).then(function (xhr) {\n  var response = xhr.responseBody; // Make sure that event is not shown on table anymore\n  cy.get(&#x27;table&#x27;).should(&#x27;not.contain.text&#x27;, eventName);\n  expect(xhr.status).to.eq(200);\n  expect(response).to.have.property(&#x27;success&#x27;).eq(true);\n  expect(response.result.deleteScheduledScene).to.have.property(&#x27;id&#x27;).not.to.be.null;\n  expect(response.result.deleteScheduledScene).to.have.property(&#x27;sceneId&#x27;).not.to.be.null;\n  expect(response.result.deleteScheduledScene).to.have.property(&#x27;name&#x27;);\n  expect(response.result.deleteScheduledScene).to.have.property(&#x27;start&#x27;);\n  cy.log(&#x27;Created Event was successfully deleted&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d4f4d19-5a82-44d6-be4e-8723e89bfde5&quot;,&quot;parentUUID&quot;:&quot;956c5116-9d92-495b-a2ef-129150e0f5ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Recurrent Event using astrotime w/ minutes in offset in existing scene - No end date&quot;,&quot;fullTitle&quot;:&quot;Testing Event Creation Recurrent Event using astrotime w/ minutes in offset in existing scene - No end date&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:21429,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var hours = Cypress.moment().format(&#x27;HH&#x27;);\nvar eventName = \&quot;Recurring on \&quot;.concat(hours); // Create event\ncy.get(&#x27;#arrow-timeline&#x27;).click();\nvar day_moment;\nif (hours &lt; 20) {\n  day_moment = &#x27;Dusk&#x27;;\n} else {\n  //change day event for tomorrow\n  cy.get(&#x27;[style=\&quot;height: 60px; position: relative; border-bottom: 1px solid rgba(169, 169, 169, 0.35);\&quot;] &gt; :nth-child(1)&#x27;).click();\n  var day_tomorrow = Cypress.moment().add(1, &#x27;days&#x27;).format(&#x27;DD&#x27;);\n  if (day_tomorrow == Cypress.moment().endOf(&#x27;month&#x27;).format(&#x27;DD&#x27;)) {\n    cy.get(&#x27;.next&#x27;); //go to the next month\n  }\n  cy.get(&#x27;.vdp-datepicker__calendar &gt; div&#x27;).contains(day_tomorrow).click(); //take me to tomorrow ;)\n}\ncy.get(&#x27;#timeline-hours &gt; :nth-child(24)&#x27;).click();\ncy.get(&#x27;span&#x27;).contains(&#x27;Recurring event&#x27;).click();\ncy.contains(&#x27;User specified&#x27;).click({\n  force: true\n});\ncy.contains(day_moment).click({\n  force: true\n}); //set timeoffset\nvar minutesOffset = 25;\ncy.get(&#x27;input[type=\&quot;number\&quot;]&#x27;).clear({\n  force: true\n}).type(minutesOffset, {\n  force: true\n});\ncy.get(&#x27;span:nth-child(1) &gt; .icon-arrow-down&#x27;).click();\ncy.get(&#x27;.justify-content-between &gt; div:nth-child(2)&#x27;).click();\ncy.get(&#x27;.btn:nth-child(2) &gt; span&#x27;).click();\ncy.get(&#x27;#btn-next&#x27;).click();\ncy.get(&#x27;#dropdown-scene__BV_toggle_&#x27;).click();\ncy.get(&#x27;.dropdown-item&#x27;).contains(&#x27;Turn Off&#x27;).click();\ncy.route(&#x27;POST&#x27;, &#x27;/api/v1/Synapse/Event&#x27;).as(&#x27;postEvent&#x27;);\ncy.get(&#x27;.btn-primary:nth-child(2)&#x27;).contains(&#x27;Save&#x27;).click();\ncy.wait(&#x27;@postEvent&#x27;).then(function (xhr) {\n  cy.wait(1500);\n  console.log(xhr.responseBody.result[0]);\n  cy.get(&#x27;button&#x27;).contains(&#x27;Events&#x27;).click();\n  cy.get(&#x27;table&#x27;).find(&#x27;td&#x27;).contains(\&quot;00:25\&quot;).parent().find(&#x27;td&#x27;).contains(xhr.responseBody.result[0].scheduleScene.astroTime).click(); // Delete the event recently created\n  cy.get(&#x27;button&#x27;).contains(&#x27;Delete&#x27;).click();\n  cy.get(&#x27;button&#x27;).contains(&#x27;Yes, delete it&#x27;).click(); // Make sure that event is not shown on table anymore\n  cy.get(&#x27;table&#x27;).should(&#x27;not.contain.text&#x27;, eventName);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ba793c5-35c7-4ece-9cc6-781936b4899b&quot;,&quot;parentUUID&quot;:&quot;956c5116-9d92-495b-a2ef-129150e0f5ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Recurrent Event using astrotime, negative solar offset &amp; specific end date&quot;,&quot;fullTitle&quot;:&quot;Testing Event Creation Recurrent Event using astrotime, negative solar offset &amp; specific end date&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:23327,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var hours = Cypress.moment().format(&#x27;HH&#x27;);\nvar eventName = \&quot;Recurring on \&quot;.concat(hours); // Create event\ncy.get(&#x27;#arrow-timeline&#x27;).click();\ncy.wait(1000);\nvar day_moment;\nif (hours &lt; 20) {\n  day_moment = &#x27;Sunset&#x27;;\n} else {\n  //change day event for tomorrow\n  cy.get(&#x27;[style=\&quot;height: 60px; position: relative; border-bottom: 1px solid rgba(169, 169, 169, 0.35);\&quot;] &gt; :nth-child(1)&#x27;).click();\n  var day_tomorrow = Cypress.moment().add(1, &#x27;days&#x27;).format(&#x27;DD&#x27;);\n  if (day_tomorrow == Cypress.moment().endOf(&#x27;month&#x27;).format(&#x27;DD&#x27;)) {\n    cy.get(&#x27;.next&#x27;); //go to the next month\n  }\n  cy.get(&#x27;.vdp-datepicker__calendar &gt; div&#x27;).contains(day_tomorrow).click(); //take me to tomorrow ;)\n}\ncy.get(&#x27;#timeline-hours &gt; :nth-child(24)&#x27;).click();\ncy.get(&#x27;span&#x27;).contains(&#x27;Recurring event&#x27;).click();\ncy.contains(&#x27;User specified&#x27;).click({\n  force: true\n});\ncy.contains(day_moment).click({\n  force: true\n}); //set timeoffset\nvar minutesOffset = -30;\ncy.get(&#x27;input[type=\&quot;number\&quot;]&#x27;).clear({\n  force: true\n}).type(minutesOffset, {\n  force: true\n}); //select end date\ncy.get(&#x27;#dropdown-todate__BV_toggle_ &gt; span &gt; .icon-sm&#x27;).click();\ncy.get(&#x27;#dropdown-todate &gt; .dropdown-menu &gt; .ps-container &gt; :nth-child(2) &gt; .dropdown-item&#x27;).contains(&#x27;Specific End Date&#x27;).click(); //automatically  the app select the tomorrow date\ncy.get(&#x27;span:nth-child(1) &gt; .icon-arrow-down&#x27;).click();\ncy.get(&#x27;.justify-content-between &gt; div:nth-child(2)&#x27;).click();\ncy.get(&#x27;#btn-next&#x27;).click();\ncy.get(&#x27;#dropdown-scene__BV_toggle_&#x27;).click();\ncy.get(&#x27;.dropdown-item&#x27;).contains(&#x27;Turn Off&#x27;).first().click();\ncy.wait(1500);\ncy.route(&#x27;POST&#x27;, &#x27;/api/v1/Synapse/Event&#x27;).as(&#x27;postEvent&#x27;);\ncy.get(&#x27;.btn-primary:nth-child(2)&#x27;).contains(&#x27;Save&#x27;).click();\ncy.wait(&#x27;@postEvent&#x27;).then(function (xhr) {\n  //Check if after the end date event is not longer visible\n  // I have some questions for validations here for the PM/TL\n  cy.wait(1500);\n  console.log(xhr.responseBody.result[0]); //Check if event is visible when should be\n  cy.get(&#x27;button&#x27;).contains(&#x27;Events&#x27;).click();\n  cy.get(&#x27;table&#x27;).find(&#x27;td&#x27;).contains(\&quot;-00:30\&quot;).parent().find(&#x27;td&#x27;).contains(xhr.responseBody.result[0].scheduleScene.astroTime).click(); // Delete the event recently created\n  cy.get(&#x27;button&#x27;).contains(&#x27;Delete&#x27;).click();\n  cy.get(&#x27;button&#x27;).contains(&#x27;Yes, delete it&#x27;).click(); // Make sure that event is not shown on table anymore\n  cy.get(&#x27;table&#x27;).should(&#x27;not.contain.text&#x27;, eventName);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bffb6a06-10f1-4710-ae28-a954b6627006&quot;,&quot;parentUUID&quot;:&quot;956c5116-9d92-495b-a2ef-129150e0f5ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Event creation via UI or API doesnt work if user has no permissions&quot;,&quot;fullTitle&quot;:&quot;Testing Event Creation Event creation via UI or API doesnt work if user has no permissions&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:19651,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var permissions = {\n  \&quot;b1fafb7c-35a9-4235-ae49-bc83d52b13a9\&quot;: [\&quot;READ\&quot;, \&quot;UPDATE\&quot;],\n  \&quot;97e9ad06-d70a-4d08-99c0-9b4ebe6f8d89\&quot;: [\&quot;READ\&quot;, \&quot;UPDATE\&quot;]\n};\ncy.updateUserPermissions(permissions).then(function () {\n  cy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;));\n  cy.server();\n  cy.route(&#x27;POST&#x27;, &#x27;/api/v1/Auth&#x27;).as(&#x27;auth&#x27;);\n  cy.loginUI(_user.usernameCloud, _user.passwordCloud);\n  cy.wait(&#x27;@auth&#x27;).then(function (xhr) {\n    cy.get(&#x27;#arrow-timeline&#x27;).click();\n    cy.wait(1000);\n    cy.get(&#x27;#timeline-hours &gt; :nth-child(24)&#x27;).click();\n    cy.get(&#x27;span&#x27;).contains(&#x27;One-time event&#x27;).should(&#x27;not.exist&#x27;); //Validate that EventCreation popup is not visible\n    cy.log(&#x27;Testing API access without permissions now...&#x27;);\n    var token = xhr.responseBody.access_token;\n    var start_date = Cypress.moment().format(&#x27;YYYY-MM-DDThh:mm:ssZ&#x27;);\n    console.log(start_date);\n    cy.request({\n      url: \&quot;api/v1/Synapse/Event\&quot;,\n      auth: {\n        bearer: token\n      },\n      method: &#x27;POST&#x27;,\n      body: {\n        siteIds: [Cypress.env(\&quot;DEVIQ_TESTING_SITE\&quot;)],\n        //DevIQ HQ\n        schedule: {\n          name: \&quot;Automated event for\&quot;,\n          start: start_date,\n          rrule: null,\n          astroTime: null,\n          astroTimeOffset: null\n        },\n        scene: {\n          id: &#x27;77587eb8-eecf-43b6-a069-8641fed926c6&#x27;,\n          name: &#x27;Turn Off&#x27;,\n          gw: &#x27;809e24d8-9a33-4575-a15a-5bf805652895&#x27;,\n          new: false,\n          scene_zone_behavior: [{\n            id: &#x27;22d992ef937d4367969787c7ea783a2d&#x27;,\n            behavior_id: &#x27;Off&#x27;,\n            behavior_parameters: null,\n            zone_id: &#x27;id_builtin_zone_all&#x27;,\n            gw: &#x27;809e24d8-9a33-4575-a15a-5bf805652895&#x27;\n          }]\n        }\n      },\n      failOnStatusCode: false\n    }).then(function (res) {\n      expect(res.status).to.eq(401);\n      expect(res.body.code).to.contains(\&quot;invalid\&quot;);\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dca3588-b710-4422-b669-24aa2c15182f&quot;,&quot;parentUUID&quot;:&quot;956c5116-9d92-495b-a2ef-129150e0f5ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0681f208-7fd2-4945-91fc-545d4884b129&quot;,&quot;0d4f4d19-5a82-44d6-be4e-8723e89bfde5&quot;,&quot;8ba793c5-35c7-4ece-9cc6-781936b4899b&quot;,&quot;bffb6a06-10f1-4710-ae28-a954b6627006&quot;,&quot;4dca3588-b710-4422-b669-24aa2c15182f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:154107,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ade1cd84-724e-4a5a-b728-5cb2dbf92439&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/integration/e2e/lights.spec.js&quot;,&quot;file&quot;:&quot;cypress/integration/e2e/lights.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;840fe6e8-75b2-46bf-b846-3918b307e04e&quot;,&quot;title&quot;:&quot;Lights E2E Tests&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;API: Get all lights data from endpoint and store intensity levels temporary&quot;,&quot;fullTitle&quot;:&quot;Lights E2E Tests API: Get all lights data from endpoint and store intensity levels temporary&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:61057,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.login_n_getLights(_user.usernameCloud, _user.passwordCloud).then(function () {\n  var token = window.localStorage.getItem(&#x27;access_token&#x27;);\n  var sites = window.localStorage.getItem(&#x27;sites&#x27;).split(&#x27;,&#x27;);\n  for (var i = 0; i &lt; sites.length; i++) {\n    cy.request({\n      auth: {\n        bearer: token\n      },\n      url: \&quot;api/v1/Synapse/\&quot;.concat(sites[i], \&quot;/Lights\&quot;),\n      timeout: 80000,\n      retryOnNetworkFailure: true\n    }).then(function (response) {\n      expect(response.status).to.eq(200);\n      expect(response.body).to.have.property(&#x27;success&#x27;).eq(true);\n      expect(response.body.light_n_controller).to.have.property(&#x27;controllers&#x27;);\n      var lights = response.body.light_n_controller.lights;\n      var lightZones = response.body.light_n_controller.lightZones;\n      var controllers = response.body.light_n_controller.controllers;\n      var lat, lng;\n      lights.forEach(function (light) {\n        expect(light).to.have.property(&#x27;id&#x27;);\n        expect(light).to.have.property(&#x27;level&#x27;);\n        assert.isNumber(light.level, &#x27;light level is numeric&#x27;);\n        expect(light.level).to.satisfy(function (light_level) {\n          return light_level &gt;= 0;\n        });\n        expect(light).to.have.property(&#x27;name&#x27;);\n        expect(light).to.have.property(&#x27;controllerId&#x27;).to.be.not.null;\n        expect(light).to.have.property(&#x27;geoLocation&#x27;).to.have.any.keys(&#x27;latitude&#x27;, &#x27;longitude&#x27;);\n        lat = light.geoLocation.latitude;\n        lng = light.geoLocation.longitude;\n        expect(lat).to.match(/^(\\-?\\d+(\\.\\d+)?)$/);\n        expect(lng).to.match(/^(\\-?\\d+(\\.\\d+)?)$/);\n      });\n      lightZones.forEach(function (lightZone) {\n        expect(lightZone).to.have.property(&#x27;id&#x27;).not.to.be.null;\n        expect(lightZone).to.have.property(&#x27;zoneId&#x27;).not.to.be.null;\n        expect(lightZone).to.have.property(&#x27;lightId&#x27;).not.to.be.null;\n      });\n      controllers.forEach(function (controller) {\n        expect(controller).to.have.property(&#x27;id&#x27;).not.to.be.null;\n        expect(controller).to.have.property(&#x27;name&#x27;).not.to.be.null;\n        expect(controller).to.have.property(&#x27;snapaddr&#x27;).not.to.be.null;\n        expect(controller).to.have.property(&#x27;type&#x27;).not.to.be.null;\n        if (controller.x != lng || controller.y != lat) {\n          console.log(&#x27;Diff Location comparing light against controller possitionðŸš§&#x27;);\n          cy.log(\&quot; \\uD83D\\uDD36 Longitude is different comparing light against controller location on controller of \&quot;.concat(controller.name));\n        } //TODO: check why this is failing for Visionaire (controller has no \&quot;x\&quot; and \&quot;y\&quot; keys)\n        //expect(controller).to.have.property(\&quot;x\&quot;).to.match(/^(\\-?\\d+(\\.\\d+)?)$/);// validate march against light location\n        //expect(controller).to.have.property(\&quot;y\&quot;).to.match(/^(\\-?\\d+(\\.\\d+)?)$/);\n      });\n    });\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;914bf534-38e6-4e52-bc44-7956b2fdb187&quot;,&quot;parentUUID&quot;:&quot;840fe6e8-75b2-46bf-b846-3918b307e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;API: Update any individual Light to 50%&quot;,&quot;fullTitle&quot;:&quot;Lights E2E Tests API: Update any individual Light to 50%&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:55888,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.login_n_getLights(_user.usernameCloud, _user.passwordCloud).then(function () {\n  var token = window.localStorage.getItem(&#x27;access_token&#x27;);\n  var lights = JSON.parse(window.localStorage.getItem(&#x27;lights&#x27;)); //cy.clearLocalStorageSnapshot()\n  console.log(lights);\n  var newLevel = 50;\n  var light = lights.find(function (light) {\n    return light.name.includes(&#x27;Test&#x27;);\n  }); // finding a light for testing purposes: normally the obtained light should be \&quot;Alarm Test Light\&quot;\n  var originalLevel = light.level;\n  console.log(\&quot;Were going to update level of light \\\&quot;\&quot;.concat(light.name, \&quot;\\\&quot; on site \&quot;).concat(light.site_id));\n  cy.request({\n    auth: {\n      bearer: token\n    },\n    method: &#x27;POST&#x27;,\n    url: \&quot;api/v1/Synapse/\&quot;.concat(light.site_id, \&quot;/Light/\&quot;).concat(light.id, \&quot;/update\&quot;),\n    body: {\n      level: newLevel\n    }\n  }).then(function (response) {\n    expect(response.status).to.eq(200);\n    expect(response.body.result.object).to.have.property(&#x27;level&#x27;).eq(newLevel);\n    cy.wait(20000); //Minimum time to await before validation of bright change - giving the application time to commit DB changes after POST success\n    cy.request({\n      method: &#x27;GET&#x27;,\n      url: \&quot;api/v1/Synapse/\&quot;.concat(light.site_id, \&quot;/Lights\&quot;),\n      auth: {\n        bearer: token\n      }\n    }).then(function (response) {\n      var updated_light = response.body.light_n_controller.lights.find(function (element) {\n        return element.id == light.id;\n      });\n      console.log(&#x27;light updated&#x27;);\n      console.log(updated_light);\n      console.log(&#x27;the level before update was: &#x27; + originalLevel);\n      console.log(&#x27;the level after update is &#x27; + updated_light.level); // restoring light bright to previous value\n      cy.request({\n        auth: {\n          bearer: token\n        },\n        method: &#x27;POST&#x27;,\n        url: \&quot;api/v1/Synapse/\&quot;.concat(light.site_id, \&quot;/Light/\&quot;).concat(light.id, \&quot;/update\&quot;),\n        body: {\n          level: originalLevel\n        }\n      }).then(function (response) {\n        cy.wait(20000); //Minimum time to await before validation of bright change - giving the application time to commit DB changes after POST success\n        cy.request({\n          method: &#x27;GET&#x27;,\n          url: \&quot;api/v1/Synapse/\&quot;.concat(light.site_id, \&quot;/Lights\&quot;),\n          auth: {\n            bearer: token\n          },\n          timeout: 80000\n        }).then(function (response) {\n          var updated_light = response.body.light_n_controller.lights.find(function (element) {\n            return element.id == light.id;\n          });\n          console.log(&#x27;light restored&#x27;);\n          console.log(updated_light);\n          console.log(&#x27;target light bright was restored to &#x27; + updated_light.level);\n          expect(updated_light.level).eq(originalLevel);\n          cy.log(\&quot;target light was restored to his original level: \&quot;.concat(originalLevel, \&quot;%\&quot;));\n        });\n      });\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1940fba6-88b3-41dc-bc62-91bc9fd697bc&quot;,&quot;parentUUID&quot;:&quot;840fe6e8-75b2-46bf-b846-3918b307e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;User is able to update lights intensity massively by selecting entire sites zone&quot;,&quot;fullTitle&quot;:&quot;Lights E2E Tests User is able to update lights intensity massively by selecting entire sites zone&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:11798,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var headquarters = cy.get(&#x27;li&#x27;).contains(\&quot;DevIQ - Headquarters\&quot;);\nconsole.log(headquarters);\ncy.get(&#x27;.gray&#x27;).click();\ncy.get(&#x27;.vue-slider-dot&#x27;).click();\ncy.get(&#x27;.btn-primary&#x27;).click();\ncy.get(&#x27;.gray&#x27;).click();\ncy.get(&#x27;.btn:nth-child(1) &gt; span&#x27;);\ncy.get(&#x27;#radio__BV_option_0_&#x27;) //OFF option of radio btn\n.click({\n  force: true\n});\nvar site_remote = &#x27;97e9ad06-d70a-4d08-99c0-9b4ebe6f8d89&#x27;;\nvar site_hq = &#x27;b1fafb7c-35a9-4235-ae49-bc83d52b13a9&#x27;;\ncy.server();\ncy.route(&#x27;POST&#x27;, \&quot;/api/v1/Synapse/\&quot;.concat(site_hq, \&quot;/Zone/update\&quot;)).as(&#x27;zoneUpdate&#x27;); //Headquarters\ncy.get(&#x27;.btn-primary&#x27;).click({\n  force: true\n});\ncy.wait(&#x27;@zoneUpdate&#x27;).should(function (xhr) {\n  expect(xhr.status, &#x27;Zone/update POST successful&#x27;).to.equal(200);\n  expect(xhr.response.body.result.applyBehaviorToZone.behaviorParameters).to.contains(&#x27;0&#x27;);\n  console.log(xhr.response.body.result);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae5a3f1f-c9be-415a-b631-4486935c2bcc&quot;,&quot;parentUUID&quot;:&quot;840fe6e8-75b2-46bf-b846-3918b307e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Be able to see light pop-up with status by clicking on a single light&quot;,&quot;fullTitle&quot;:&quot;Lights E2E Tests Be able to see light pop-up with status by clicking on a single light&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2379aad-45ab-46bb-9b7f-b5ab83509ef6&quot;,&quot;parentUUID&quot;:&quot;840fe6e8-75b2-46bf-b846-3918b307e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;See device details by finding light on map from Devices Panel&quot;,&quot;fullTitle&quot;:&quot;Lights E2E Tests See device details by finding light on map from Devices Panel&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:10670,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Click on first gateway\ncy.get(&#x27;div[style*=\&quot;background-image\&quot;]&#x27;).first().trigger(&#x27;click&#x27;, {\n  force: true\n}); // Click on Devices button\ncy.get(&#x27;button&#x27;).contains(&#x27;Devices&#x27;).click(); //Click on first device listed from table\ncy.get(&#x27;tbody&gt;tr&#x27;).eq(0).click({\n  force: true\n}); //Click on View Details\ncy.get(&#x27;button&#x27;).contains(&#x27;View Details&#x27;).click(); // Validate that View Details pop up is visible\ncy.get(&#x27;#light-modal___BV_modal_body_&#x27;).should(&#x27;be.visible&#x27;); // Assert that controller_id is not null\n/*\ncy.get(&#x27;section[class*=\&quot;ps-container info-scroll-area\&quot;]&#x27;)\n.find(&#x27;div&#x27;)\n.contains(&#x27;controller_id&#x27;).find(&#x27;b&#x27;)\n.invoke(&#x27;text&#x27;)\n.then(function(controller_id_text) {\n  assert.isNotNull(\n    controller_id_text,\n    &#x27;controller_id should not be null&#x27;\n  );\n  cy.log(\&quot;âœ… controller_id is visible on light pop-up\&quot;)\n});*/\n// Assert that light_id_text is not null\n/*\ncy.get(&#x27;section[class*=\&quot;ps-container info-scroll-area\&quot;]&#x27;)\n.find(&#x27;div&#x27;)\n  .contains(&#x27;id&#x27;) //.contains(new RegExp(`^(${&#x27;id&#x27;})`, &#x27;g&#x27;))\n    .find(&#x27;b&#x27;)\n      .invoke(&#x27;text&#x27;)\n        .then(function(light_id_text) {\n          assert.isNotNull(light_id_text, &#x27;light_id should not be null&#x27;);\n        });\n        cy.log(\&quot;âœ… light_id is visible on light pop-up\&quot;)\n  */&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1039d78c-d5ea-4bf6-b2d3-c4a81f86c7fe&quot;,&quot;parentUUID&quot;:&quot;840fe6e8-75b2-46bf-b846-3918b307e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;User cant update zone light intensity using the UI or the API if hasn&#x27;t proper permissions to do it&quot;,&quot;fullTitle&quot;:&quot;Lights E2E Tests User cant update zone light intensity using the UI or the API if hasn&#x27;t proper permissions to do it&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:21149,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var permissions = {\n  \&quot;b1fafb7c-35a9-4235-ae49-bc83d52b13a9\&quot;: [\&quot;READ\&quot;, \&quot;STREAM\&quot;, \&quot;SCHEDULE\&quot;],\n  //removing \&quot;UPDATE\&quot;\n  \&quot;97e9ad06-d70a-4d08-99c0-9b4ebe6f8d89\&quot;: [\&quot;READ\&quot;, \&quot;SCHEDULE\&quot;]\n};\ncy.updateUserPermissions(permissions).then(function () {\n  /** Login to Pangea */\n  cy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;));\n  cy.server();\n  cy.route(&#x27;POST&#x27;, &#x27;/api/v1/Auth&#x27;).as(&#x27;auth&#x27;);\n  cy.loginUI(_user.usernameCloud, _user.passwordCloud);\n  cy.wait(&#x27;@auth&#x27;).then(function (xhr) {\n    cy.wait(5000);\n    cy.get(&#x27;.gray&#x27;).click(); //TODO: were showing the popup for editing an entire zone, Ill continue validations after this popup being removed\n    //cy.get(&#x27;.vue-slider-dot&#x27;).should(&#x27;not.exist&#x27;);  //isue un the app\n    var site_hq = &#x27;b1fafb7c-35a9-4235-ae49-bc83d52b13a9&#x27;;\n    var token = xhr.responseBody.access_token;\n    /*cy.route(&#x27;POST&#x27;, `/api/v1/Synapse/${site_hq}/Zone/update`).as(&#x27;zoneUpdate&#x27;); //Headquarters\n    cy.get(&#x27;.btn-primary&#x27;).click({force:true});*/\n    var newLevel = 50;\n    cy.request({\n      url: \&quot;api/v1/Synapse/\&quot;.concat(site_hq, \&quot;/Zone/update\&quot;),\n      method: &#x27;POST&#x27;,\n      auth: {\n        bearer: token\n      },\n      failOnStatusCode: false,\n      body: {\n        siteId: site_hq,\n        zoneId: \&quot;id_builtin_zone_all\&quot;,\n        behaviorId: \&quot;Dimmer\&quot;,\n        behaviorParameters: {\n          \&quot;level\&quot;: newLevel\n        }\n      }\n    }).then(function (response) {\n      expect(response.status).to.eq(401);\n      expect(response.body.code).to.contains(\&quot;invalid\&quot;);\n    });\n  });\n});&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click&quot;,&quot;estack&quot;:&quot;CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n    at mouseAction (http://test.pangea.deviq.io/__cypress/runner/cypress_runner.js:150774:17)\n    at Context.click (http://test.pangea.deviq.io/__cypress/runner/cypress_runner.js:150918:14)\n    at Context.&lt;anonymous&gt; (http://test.pangea.deviq.io/__cypress/runner/cypress_runner.js:167681:21)\nFrom Your Spec Code:\n    at Context.eval (http://test.pangea.deviq.io/__cypress/tests?p=cypress/integration/e2e/lights.spec.js:319:25)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;c5c1bd82-39ad-4e38-a8bb-458d8921d5ad&quot;,&quot;parentUUID&quot;:&quot;840fe6e8-75b2-46bf-b846-3918b307e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;API: User cant update an individual light without proper permissions&quot;,&quot;fullTitle&quot;:&quot;Lights E2E Tests API: User cant update an individual light without proper permissions&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:14807,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;var permissions = {\n  \&quot;b1fafb7c-35a9-4235-ae49-bc83d52b13a9\&quot;: [\&quot;READ\&quot;],\n  //removing \&quot;UPDATE\&quot;\n  \&quot;97e9ad06-d70a-4d08-99c0-9b4ebe6f8d89\&quot;: [\&quot;READ\&quot;]\n};\ncy.updateUserPermissions(permissions).then(function () {\n  cy.login_n_getLights(_user.usernameCloud, _user.passwordCloud).then(function () {\n    var token = window.localStorage.getItem(&#x27;access_token&#x27;);\n    var lights = JSON.parse(window.localStorage.getItem(&#x27;lights&#x27;));\n    console.log(lights);\n    var newLevel = 50;\n    var light = lights.find(function (light) {\n      return light.name.includes(&#x27;Test&#x27;);\n    }); // finding a light for testing purposes: normally the obtained light should be \&quot;Alarm Test Light\&quot;\n    cy.request({\n      auth: {\n        bearer: token\n      },\n      method: &#x27;POST&#x27;,\n      url: \&quot;api/v1/Synapse/\&quot;.concat(light.site_id, \&quot;/Light/\&quot;).concat(light.id, \&quot;/update\&quot;),\n      body: {\n        level: newLevel\n      },\n      failOnStatusCode: false\n    }).then(function (response) {\n      expect(response.status).to.eq(401);\n      expect(response.body.code).to.contains(\&quot;invalid\&quot;);\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3399ab4f-1465-4ddc-b3bc-fd615ff8df4a&quot;,&quot;parentUUID&quot;:&quot;840fe6e8-75b2-46bf-b846-3918b307e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;914bf534-38e6-4e52-bc44-7956b2fdb187&quot;,&quot;1940fba6-88b3-41dc-bc62-91bc9fd697bc&quot;,&quot;ae5a3f1f-c9be-415a-b631-4486935c2bcc&quot;,&quot;1039d78c-d5ea-4bf6-b2d3-c4a81f86c7fe&quot;,&quot;3399ab4f-1465-4ddc-b3bc-fd615ff8df4a&quot;],&quot;failures&quot;:[&quot;c5c1bd82-39ad-4e38-a8bb-458d8921d5ad&quot;],&quot;pending&quot;:[&quot;d2379aad-45ab-46bb-9b7f-b5ab83509ef6&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:175369,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e7a4c810-42bc-4455-b82f-217035b42ff2&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/integration/e2e/login.spec.js&quot;,&quot;file&quot;:&quot;cypress/integration/e2e/login.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3fc5e316-37df-4efe-93c7-bdc100ab865f&quot;,&quot;title&quot;:&quot;Log-in and Sign-out tests&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Validate login endpoint with Cloud User testing@deviq.io&quot;,&quot;fullTitle&quot;:&quot;Log-in and Sign-out tests Validate login endpoint with Cloud User testing@deviq.io&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:2292,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;console.log(_user.usernameCloud);\ncy.request({\n  method: &#x27;POST&#x27;,\n  url: \&quot;\&quot;.concat(Cypress.env(\&quot;PANGEA_BASE_URL\&quot;), \&quot;/api/v1/Auth\&quot;),\n  body: {\n    email: _user.usernameCloud,\n    password: _user.passwordCloud,\n    client_id: &#x27;admin&#x27;,\n    grant_type: &#x27;password&#x27;\n  }\n}).then(function (response) {\n  expect(response.status).to.eq(200);\n  expect(response.body).to.have.property(&#x27;success&#x27;).eq(true);\n  expect(response.body).to.have.property(&#x27;oldSSRA&#x27;).eq(false);\n  if (!response.body.sites.empty) {\n    console.log(&#x27;iterating sites.....&#x27;);\n    var sites = response.body.sites;\n    sites.forEach(function (site) {\n      console.log(site);\n      expect(site).to.have.property(&#x27;name&#x27;).to.be.not.null;\n      expect(site).to.have.property(&#x27;id&#x27;).to.be.not.null;\n      expect(site).to.have.property(&#x27;siteControllers&#x27;).to.be.not.empty;\n    });\n  }\n  if (!response.body.profile.empty) {\n    expect(response.body.profile).to.have.property(&#x27;email&#x27;).to.contains(&#x27;@&#x27;);\n    expect(response.body.profile).to.have.property(&#x27;role&#x27;).to.be.not.empty;\n    expect(response.body.profile).to.have.property(&#x27;lastLogin&#x27;);\n    expect(response.body.profile).to.have.property(&#x27;name&#x27;).to.be.not.empty;\n  }\n  expect(response.body.theme).to.have.property(&#x27;id&#x27;).to.be.not.null;\n  expect(response.body.theme).to.have.property(&#x27;logo&#x27;).to.be.not.empty;\n  expect(response.body.theme).to.have.property(&#x27;nm&#x27;).to.be.not.null;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce6c31e1-abea-4e3d-adbf-de22b2db082e&quot;,&quot;parentUUID&quot;:&quot;3fc5e316-37df-4efe-93c7-bdc100ab865f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;User Sign-In and Sign-Out&quot;,&quot;fullTitle&quot;:&quot;Log-in and Sign-out tests User Sign-In and Sign-Out&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:9490,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.server(); // Login to Pangea\ncy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;));\ncy.route(&#x27;POST&#x27;, &#x27;/api/v1/Auth&#x27;).as(&#x27;auth&#x27;);\ncy.loginUI(_user.usernameCloud, _user.passwordCloud);\ncy.wait(&#x27;@auth&#x27;).then(function (xhr) {\n  expect(xhr.status).eq(200);\n  cy.url().should(&#x27;eq&#x27;, &#x27;http://test.pangea.deviq.io/#/lights&#x27;);\n  expect(xhr.responseBody.access_token).not.to.be.null;\n  expect(xhr.responseBody.oldSSRA).not.to.be.null;\n  expect(xhr.responseBody.org).not.to.be.null;\n  expect(xhr.responseBody).to.have.property(&#x27;permissions&#x27;);\n  var permissions = xhr.responseBody.permissions;\n  permissions.forEach(function (permission) {\n    expect(permission.site).not.to.be.null;\n    expect(permission.perm).not.to.be.null;\n  });\n  expect(xhr.responseBody.profile).to.contains.keys([&#x27;email&#x27;, &#x27;lastLogin&#x27;, &#x27;name&#x27;, &#x27;role&#x27;]);\n  expect(xhr.responseBody).to.have.property(&#x27;sites&#x27;);\n  expect(xhr.responseBody).to.have.property(&#x27;theme&#x27;).keys([&#x27;id&#x27;, &#x27;nm&#x27;, &#x27;logo&#x27;]);\n  expect(xhr.responseBody).to.have.property(&#x27;userId&#x27;);\n  cy.get(&#x27;.app-header&#x27;).contains(\&quot;Logout\&quot;).click();\n  expect(cy.url().should(&#x27;eq&#x27;, Cypress.env(&#x27;PANGEA_BASE_URL&#x27;) + &#x27;/#/login&#x27;));\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c6d37f7-7e2b-4625-99f4-4eeb383801aa&quot;,&quot;parentUUID&quot;:&quot;3fc5e316-37df-4efe-93c7-bdc100ab865f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;User try to Login into the app with bad credentials, user gets an explicit message&quot;,&quot;fullTitle&quot;:&quot;Log-in and Sign-out tests User try to Login into the app with bad credentials, user gets an explicit message&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:2128,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.server();\ncy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;));\ncy.route(&#x27;POST&#x27;, &#x27;/api/v1/Auth&#x27;).as(&#x27;auth&#x27;);\ncy.loginUI(_user.usernameCloud, \&quot;badPassword\&quot;); //bad password\ncy.wait(&#x27;@auth&#x27;).then(function (xhr) {\n  //Popup Message should be displayed\n  cy.get(&#x27;.swal2-popup&#x27;).should(&#x27;contain&#x27;, \&quot;Invalid Credentials\&quot;);\n  console.log(xhr.responseBody);\n  expect(xhr.status).eq(401);\n  expect(xhr.responseBody.code).to.be.eq(&#x27;invalid_client&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6f42d03-bbec-4e74-86bb-5d9d668a9795&quot;,&quot;parentUUID&quot;:&quot;3fc5e316-37df-4efe-93c7-bdc100ab865f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce6c31e1-abea-4e3d-adbf-de22b2db082e&quot;,&quot;5c6d37f7-7e2b-4625-99f4-4eeb383801aa&quot;,&quot;c6f42d03-bbec-4e74-86bb-5d9d668a9795&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13910,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ac1c3efe-c13f-4fc5-b632-cec4de6406fe&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/integration/e2e/sites.spec.js&quot;,&quot;file&quot;:&quot;cypress/integration/e2e/sites.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e6b57a6a-29a5-4d14-877c-70f7dcc482b5&quot;,&quot;title&quot;:&quot;UI changes according to selected sites and users timezones&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;valdidate that when user selects sites from other diff timezone the timeline displays his current location time&quot;,&quot;fullTitle&quot;:&quot;UI changes according to selected sites and users timezones valdidate that when user selects sites from other diff timezone the timeline displays his current location time&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:14714,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;));\ncy.server();\ncy.route(&#x27;POST&#x27;, &#x27;/api/v1/Auth&#x27;).as(&#x27;auth&#x27;);\ncy.loginUI(_user.usernameAdmin, _user.passwordAdmin);\ncy.wait(&#x27;@auth&#x27;).then(function (xhr) {\n  cy.wait(3000);\n  cy.contains(&#x27;SITES&#x27;).click();\n  cy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;DevIQ - Headquarters&#x27;).then(function (headquarters_option) {\n    var eye_icon = headquarters_option.parent().find(&#x27;.icon-xs&#x27;);\n    var hqsite_id = &#x27;b1fafb7c-35a9-4235-ae49-bc83d52b13a9&#x27;; //DevIQ - Headquarters\n    cy.route(&#x27;GET&#x27;, \&quot;/api/v1/Synapse/\&quot;.concat(hqsite_id, \&quot;/Events?start=**\&quot;)).as(&#x27;getEvents&#x27;);\n    console.log(eye_icon);\n    console.log(eye_icon[0].attributes.style.value);\n    if (eye_icon[0].attributes.style.value.includes(&#x27;opacity: 0.2&#x27;)) {\n      //if remote site is disabled\n      console.log(\&quot;Headquarters was disable at the begining\&quot;);\n      headquarters_option.click();\n    } //disable Remote Site\n    //cy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;DevIQ - Remote Site&#x27;).click()\n\n    cy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;Visionaire&#x27;).click();\n    cy.wait(1500); //Before enable VIS site, do the validations here:\n    cy.get(&#x27;#arrow-timeline&#x27;).click();\n    cy.get(&#x27;[style=\&quot;height: 60px; position: relative; border-bottom: 1px solid rgba(169, 169, 169, 0.35);\&quot;] &gt; :nth-child(3) &gt; .w&#x27;).as(&#x27;ctime_label&#x27;);\n    cy.get(&#x27;@ctime_label&#x27;).invoke(&#x27;text&#x27;).then(function (txt) {\n      console.log(txt);\n    }); //1- conseguir el texto que tiene este div\n    cy.get(&#x27;@ctime_label&#x27;).invoke(&#x27;text&#x27;).then(function (txt) {\n      expect(txt).to.contains(moment().tz(\&quot;America/Denver\&quot;).format(&#x27;hh:mm a z&#x27;) || moment().tz(\&quot;America/Denver\&quot;).add(1, &#x27;m&#x27;).format(&#x27;hh:mm a z&#x27;));\n    }); //2- validar que contenga la hora actual en denver en MDT\n    //Selecting Visionaire\n    cy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;Visionaire - Main&#x27;).then(function (visionaire_option) {\n      var eye_icon = visionaire_option.parent().find(&#x27;.icon-xs&#x27;);\n      var visSite_id = &#x27;8d31c63f-3592-43f2-97c8-cb0e2d3ae5e2&#x27;; //DevIQ - Headquarters\n      cy.route(&#x27;GET&#x27;, \&quot;/api/v1/Synapse/\&quot;.concat(visSite_id, \&quot;/Events?start=**\&quot;)).as(&#x27;getEvents&#x27;);\n      console.log(eye_icon);\n      console.log(eye_icon[0].attributes.style.value);\n      if (eye_icon[0].attributes.style.value.includes(&#x27;opacity: 0.2&#x27;)) {\n        //if remote site is disabled\n        console.log(\&quot;VIS Site was disable at the begining\&quot;);\n        visionaire_option.click();\n      }\n      cy.wait(1500);\n      cy.get(&#x27;[style=\&quot;height: 60px; position: relative; border-bottom: 1px solid rgba(169, 169, 169, 0.35);\&quot;] &gt; :nth-child(3) &gt; .w&#x27;).as(&#x27;ctime_afterChange&#x27;);\n      cy.get(&#x27;@ctime_afterChange&#x27;).invoke(&#x27;text&#x27;).then(function (txt) {\n        expect(txt).to.contain(moment().tz(moment.tz.guess()).format(&#x27;hh:mm a z&#x27;) || moment().tz(moment.tz.guess()).add(1, &#x27;m&#x27;).format(&#x27;hh:mm a z&#x27;));\n      });\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f68e0456-e471-474e-a94e-517415bf451e&quot;,&quot;parentUUID&quot;:&quot;e6b57a6a-29a5-4d14-877c-70f7dcc482b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;timeline should display always gateways time if all selected sites share the same timezone&quot;,&quot;fullTitle&quot;:&quot;UI changes according to selected sites and users timezones timeline should display always gateways time if all selected sites share the same timezone&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:7838,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;));\nvar vis_timezone;\nvar visSite_id = &#x27;8d31c63f-3592-43f2-97c8-cb0e2d3ae5e2&#x27;; //Visionaire site_id\ncy.server();\ncy.route(&#x27;POST&#x27;, &#x27;/api/v1/Auth&#x27;).as(&#x27;auth&#x27;);\ncy.route(&#x27;GET&#x27;, \&quot;/api/v1/Synapse/\&quot;.concat(visSite_id, \&quot;/Settings\&quot;)).as(&#x27;getVisSettings&#x27;);\ncy.loginUI(_user.usernameAdmin, _user.passwordAdmin);\ncy.wait(&#x27;@auth&#x27;).then(function (xhr) {\n  cy.wait(3000);\n  cy.wait(&#x27;@getVisSettings&#x27;).then(function (xhr) {\n    vis_timezone = xhr.responseBody.settings.timezone;\n  });\n  cy.contains(&#x27;SITES&#x27;).click(); //Selecting Visionaire\n  cy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;Visionaire - Main&#x27;).then(function (visionaire_option) {\n    var eye_icon = visionaire_option.parent().find(&#x27;.icon-xs&#x27;);\n    cy.route(&#x27;GET&#x27;, \&quot;/api/v1/Synapse/\&quot;.concat(visSite_id, \&quot;/Events?start=****\&quot;)).as(&#x27;getSettings&#x27;);\n    if (eye_icon[0].attributes.style.value.includes(&#x27;opacity: 0.2&#x27;)) {\n      //if remote site is disabled\n      console.log(\&quot;VIS Site was disable at the begining\&quot;);\n      visionaire_option.click();\n      cy.wait(500); //cy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;DevIQ - Remote Site&#x27;).click()\n      cy.get(&#x27;#accordion-sites&#x27;).contains(&#x27;Visionaire&#x27;).click();\n    }\n    cy.get(&#x27;#arrow-timeline&#x27;).click();\n    cy.get(&#x27;[style=\&quot;height: 60px; position: relative; border-bottom: 1px solid rgba(169, 169, 169, 0.35);\&quot;] &gt; :nth-child(3) &gt; .w&#x27;).as(&#x27;ctime_label&#x27;);\n    cy.get(&#x27;@ctime_label&#x27;).invoke(&#x27;text&#x27;).then(function (txt) {\n      expect(txt).to.contain(moment().tz(vis_timezone).format(&#x27;hh:mm a z&#x27;) || moment().tz().add(1, &#x27;m&#x27;).format(&#x27;hh:mm a z&#x27;));\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e39d390-9a34-4c14-b910-14ad692b891d&quot;,&quot;parentUUID&quot;:&quot;e6b57a6a-29a5-4d14-877c-70f7dcc482b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Compare alarms for SimplySnap against alarms retrieved in Pangea&quot;,&quot;fullTitle&quot;:&quot;UI changes according to selected sites and users timezones Compare alarms for SimplySnap against alarms retrieved in Pangea&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f29686d-e764-44db-b156-11225de8974b&quot;,&quot;parentUUID&quot;:&quot;e6b57a6a-29a5-4d14-877c-70f7dcc482b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f68e0456-e471-474e-a94e-517415bf451e&quot;,&quot;1e39d390-9a34-4c14-b910-14ad692b891d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;8f29686d-e764-44db-b156-11225de8974b&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:22552,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;abe3e0bc-5d3a-41de-8701-9815b539f7cb&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/integration/e2e/users.spec.js&quot;,&quot;file&quot;:&quot;cypress/integration/e2e/users.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8267237e-003a-44b5-b14a-d3cd59b12a3f&quot;,&quot;title&quot;:&quot;Testing Users CRUD&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Users are properly filled on table&quot;,&quot;fullTitle&quot;:&quot;Testing Users CRUD Users are properly filled on table&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:12950,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;)); //login form\ncy.loginUI(_user.usernameAdmin, _user.passwordAdmin);\ncy.server();\ncy.route(&#x27;GET&#x27;, \&quot;http://test.pangea.deviq.io/api/v1/User\&quot;).as(&#x27;getUsers&#x27;);\ncy.goToAdminPanel();\ncy.wait(&#x27;@getUsers&#x27;).then(function (xhr) {\n  console.log(xhr.responseBody);\n  expect(xhr.responseBody).to.have.property(&#x27;success&#x27;).eq(true);\n  cy.get(&#x27;table&#x27;).find(&#x27;tr&#x27;).should(&#x27;have.length&#x27;, xhr.responseBody.users.length + 1); //+1 for\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fb2a44b-cde7-43b2-bb8a-15e797893306&quot;,&quot;parentUUID&quot;:&quot;8267237e-003a-44b5-b14a-d3cd59b12a3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Testing User Creation&quot;,&quot;fullTitle&quot;:&quot;Testing Users CRUD Testing User Creation&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:17373,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.viewport(1820, 968); // Login to Pangea Admin\ncy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;)); //login form\ncy.loginUI(_user.usernameAdmin, _user.passwordAdmin);\ncy.goToAdminPanel();\ncy.contains(&#x27;button&#x27;, &#x27;Add new user&#x27;).click({\n  force: true\n}); // Enter email\ncy.get(&#x27;#input-live&#x27;).type(email, {\n  force: true\n});\ncy.get(&#x27;span&#x27;).contains(&#x27;Choose Organization&#x27;).click({\n  force: true\n});\ncy.get(&#x27;ul[role=\&quot;menu\&quot;]&#x27;).contains(&#x27;deviq&#x27;).click({\n  force: true\n}); // Select a theme\ncy.get(&#x27;ul[role=\&quot;menu\&quot;]&#x27;).find(&#x27;li&#x27;).contains(&#x27;deviq&#x27;).click({\n  force: true\n}); //Select Permissions\ncy.get(&#x27;span&#x27;).contains(&#x27;Modify Permissions&#x27;).click({\n  force: true\n});\ncy.get(&#x27;#dropdown-permissions&#x27;).click({\n  force: true\n});\ncy.contains(&#x27;Device Control&#x27;).click({\n  force: true\n});\ncy.contains(&#x27;Scheduling&#x27;).click({\n  force: true\n}); //Select Sites\ncy.get(&#x27;span&#x27;).contains(&#x27;Select Sites&#x27;).click({\n  force: true\n});\ncy.contains(&#x27;Headquarters&#x27;).click({\n  force: true\n});\ncy.contains(&#x27;Remote Site&#x27;).click({\n  force: true\n}); // Make sure that email recently added is shown correctly on emails table\ncy.server();\ncy.route(&#x27;POST&#x27;, &#x27;api/v1/User&#x27;).as(&#x27;postUser&#x27;);\ncy.route(&#x27;GET&#x27;, &#x27;api/v1/User&#x27;).as(&#x27;getUsers&#x27;); // Click on \&quot;Save\&quot; button\ncy.get(&#x27;button[title=\&quot;add new user\&quot;]&#x27;).click({\n  force: true\n});\ncy.wait(&#x27;@postUser&#x27;).then(function (xhr) {\n  cy.wait(2000);\n  var res = xhr.responseBody;\n  expect(xhr.status).to.eq(200);\n  expect(res).to.have.property(&#x27;success&#x27;).eq(true);\n  cy.wait(&#x27;@getUsers&#x27;).then(function (xhr) {\n    expect(xhr.status).to.eq(200);\n    expect(xhr.responseBody).to.have.property(&#x27;users&#x27;);\n    cy.contains(email).parent().parent().contains(setedTheme);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14de89ff-8888-4b4e-999c-c66f74304812&quot;,&quot;parentUUID&quot;:&quot;8267237e-003a-44b5-b14a-d3cd59b12a3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Testing activation mechanism via Mailslurp for previously created user autotest_07271330@deviq.io&quot;,&quot;fullTitle&quot;:&quot;Testing Users CRUD Testing activation mechanism via Mailslurp for previously created user autotest_07271330@deviq.io&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df3bc177-8e40-413b-a3cf-3ef0d7aefce9&quot;,&quot;parentUUID&quot;:&quot;8267237e-003a-44b5-b14a-d3cd59b12a3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Deletion of previously created user&quot;,&quot;fullTitle&quot;:&quot;Testing Users CRUD Deletion of previously created user&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:6651,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;)); //login form\ncy.loginUI(_user.usernameAdmin, _user.passwordAdmin);\ncy.server();\ncy.route(&#x27;GET&#x27;, \&quot;/api/v1/User\&quot;).as(&#x27;getUsers&#x27;);\ncy.get(&#x27;.app-header &gt; .d-flex &gt; :nth-child(1) &gt; .w&#x27;).should(&#x27;contain.text&#x27;, &#x27;Admin&#x27;).click();\ncy.viewport(1820, 968);\ncy.wait(&#x27;@getUsers&#x27;).then(function (xhr) {\n  //conseguir la fila que tenga \&quot;email\n  cy.get(&#x27;table&#x27;).find(&#x27;tr&#x27;).contains(email).get(&#x27;tr:nth-child(3) .w-100&#x27;).click({\n    force: true\n  });\n  cy.get(&#x27;.swal2-confirm&#x27;).click();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9903e3e-2c6e-4de2-bc45-ffd8d8ba733f&quot;,&quot;parentUUID&quot;:&quot;8267237e-003a-44b5-b14a-d3cd59b12a3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Themes are properly filled on table&quot;,&quot;fullTitle&quot;:&quot;Testing Users CRUD Themes are properly filled on table&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:8662,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.visit(Cypress.env(&#x27;PANGEA_BASE_URL&#x27;)); //login form\ncy.loginUI(_user.usernameAdmin, _user.passwordAdmin);\ncy.server();\ncy.route(&#x27;GET&#x27;, \&quot;http://test.pangea.deviq.io/api/v1/Theme\&quot;).as(&#x27;getThemes&#x27;);\ncy.goToAdminPanel();\ncy.viewport(1800, 968);\ncy.get(&#x27;:nth-child(3) &gt; .ml-auto &gt; div &gt; .mb-0&#x27;).contains(&#x27;Themes&#x27;).click(); //go to Themes view\ncy.wait(&#x27;@getThemes&#x27;).then(function (xhr) {\n  expect(xhr.responseBody).to.have.property(&#x27;success&#x27;).eq(true);\n  var themes = xhr.responseBody.themes;\n  console.log(themes);\n  themes.forEach(function (theme) {\n    cy.get(&#x27;[aria-colcount=\&quot;4\&quot;]&#x27;).find(&#x27;tr&#x27;).as(&#x27;row&#x27;);\n    cy.get(&#x27;@row&#x27;).contains(theme.nm);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aff6a895-91bb-4d1b-874d-5d6a2083a87f&quot;,&quot;parentUUID&quot;:&quot;8267237e-003a-44b5-b14a-d3cd59b12a3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fb2a44b-cde7-43b2-bb8a-15e797893306&quot;,&quot;14de89ff-8888-4b4e-999c-c66f74304812&quot;,&quot;e9903e3e-2c6e-4de2-bc45-ffd8d8ba733f&quot;,&quot;aff6a895-91bb-4d1b-874d-5d6a2083a87f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;df3bc177-8e40-413b-a3cf-3ef0d7aefce9&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:45636,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a45bf8c9-c2e8-4f73-8f9e-d2a968c3f5da&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/integration/e2e/Event.feature&quot;,&quot;file&quot;:&quot;cypress/integration/e2e/Event.feature&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;738a6e07-efd9-468b-af90-34215a3b05a4&quot;,&quot;title&quot;:&quot;Events-Creation&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Create an Recurring Event with no end date and negative solar offset using Astrotime&quot;,&quot;fullTitle&quot;:&quot;Events-Creation Create an Recurring Event with no end date and negative solar offset using Astrotime&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:25491,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = window.testState;\nreturn cy\n  .then(() =&gt; state.onStartScenario(scenario, indexedSteps))\n  .then(() =&gt;\n    resolveAndRunBeforeHooks.call(this, scenario.tags, state.feature.name)\n  )\n  .then(() =&gt;\n    indexedSteps.forEach(step =&gt;\n      stepTest.call(this, state, step, rowData)\n    )\n  )\n  .then(() =&gt;\n    resolveAndRunAfterHooks.call(this, scenario.tags, state.feature.name)\n  )\n  .then(() =&gt; state.onFinishScenario(scenario));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a34ed9b4-1535-4260-a377-e9b0862946e1&quot;,&quot;parentUUID&quot;:&quot;738a6e07-efd9-468b-af90-34215a3b05a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a34ed9b4-1535-4260-a377-e9b0862946e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25491,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0080165d-f5d6-4079-a131-f9364fe780ee&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/integration/e2e/Login.feature&quot;,&quot;file&quot;:&quot;cypress/integration/e2e/Login.feature&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;93183987-e7b5-46a4-bfac-d37770256190&quot;,&quot;title&quot;:&quot;Login&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Pangea Login Success&quot;,&quot;fullTitle&quot;:&quot;Login Pangea Login Success&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:10288,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = window.testState;\nreturn cy\n  .then(() =&gt; state.onStartScenario(scenario, indexedSteps))\n  .then(() =&gt;\n    resolveAndRunBeforeHooks.call(this, scenario.tags, state.feature.name)\n  )\n  .then(() =&gt;\n    indexedSteps.forEach(step =&gt;\n      stepTest.call(this, state, step, rowData)\n    )\n  )\n  .then(() =&gt;\n    resolveAndRunAfterHooks.call(this, scenario.tags, state.feature.name)\n  )\n  .then(() =&gt; state.onFinishScenario(scenario));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca2b64f9-5130-442e-b406-8f2438da4c46&quot;,&quot;parentUUID&quot;:&quot;93183987-e7b5-46a4-bfac-d37770256190&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Pangea Login With Bad Credentials&quot;,&quot;fullTitle&quot;:&quot;Login Pangea Login With Bad Credentials&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:2756,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = window.testState;\nreturn cy\n  .then(() =&gt; state.onStartScenario(scenario, indexedSteps))\n  .then(() =&gt;\n    resolveAndRunBeforeHooks.call(this, scenario.tags, state.feature.name)\n  )\n  .then(() =&gt;\n    indexedSteps.forEach(step =&gt;\n      stepTest.call(this, state, step, rowData)\n    )\n  )\n  .then(() =&gt;\n    resolveAndRunAfterHooks.call(this, scenario.tags, state.feature.name)\n  )\n  .then(() =&gt; state.onFinishScenario(scenario));&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: If credentials are wrong the frontend should wait for a HTTP 401 (Unauthorized): expected 500 to equal 401&quot;,&quot;estack&quot;:&quot;AssertionError: If credentials are wrong the frontend should wait for a HTTP 401 (Unauthorized): expected 500 to equal 401\n    at Context.eval (http://test.pangea.deviq.io/__cypress/tests?p=cypress/integration/e2e/Login.feature:69:107)&quot;,&quot;diff&quot;:&quot;- 500\n+ 401\n&quot;},&quot;uuid&quot;:&quot;4b9d81c3-9a47-4021-87f2-9b70de62b217&quot;,&quot;parentUUID&quot;:&quot;93183987-e7b5-46a4-bfac-d37770256190&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ca2b64f9-5130-442e-b406-8f2438da4c46&quot;],&quot;failures&quot;:[&quot;4b9d81c3-9a47-4021-87f2-9b70de62b217&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13044,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.0.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:true,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:false,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false},&quot;version&quot;:&quot;4.1.0&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;id&quot;:&quot;default&quot;,&quot;reportDir&quot;:&quot;cypress/reports/mocha&quot;,&quot;quiet&quot;:true,&quot;overwrite&quot;:false,&quot;html&quot;:false,&quot;json&quot;:true},&quot;version&quot;:&quot;4.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;report&quot;,&quot;reportDir&quot;:&quot;mochareports&quot;,&quot;reportTitle&quot;:&quot;pangea-web-server&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochareports/assets&quot;,&quot;htmlFile&quot;:&quot;/home/juampi/DevIQ/Pangea/pangea-web-server/mochareports/report.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>